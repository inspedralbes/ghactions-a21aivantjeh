name: Despliegue automÃ¡tico con GitHub Actions
run-name: Subida a producciÃ³n de la aplicaciÃ³n

on: [push]

jobs:
 build:
   runs-on: ubuntu-latest
   steps:
       - uses: actions/checkout@v4
       - name: Use Node.js ${{ matrix.node-version }}
         uses: actions/setup-node@v4
         with:
           node-version: ${{ matrix.node-version }}
           cache: 'npm'
       - run: npm install
       - run: npm run build --if-present


       # ğŸ‘‡ Verificar si 'dist' existe
       - run: ls -la dist || echo "âš ï¸ Directori 'dist' no existeix!"


       - uses: actions/upload-artifact@v4
         with:
           name: app-build
           path: dist


 Pujar-a-produccio-amb-SCP:
   runs-on: ubuntu-latest
   needs: [build]
   steps:
     - name: Obtenint el codi del respositori
       uses: actions/checkout@v4


     # ğŸ‘‡ Descargar el artifact del build
     - name: Descarregant l'arxiu construÃ¯t
       uses: actions/download-artifact@v4
       with:
         name: app-build
         path: dist


     - name: Verificar contenid del directori descarregat
       run: ls -la dist || echo "âš ï¸ No s'ha descarregat res a 'dist'!"

     - run: echo "ğŸ This job's status is ${{ job.status }}."
